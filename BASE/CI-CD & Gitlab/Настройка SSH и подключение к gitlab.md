Инструкция по настройке и подключению SSH-подключения к GitLab:

1.Генерация SSH-ключа:

Откройте командную строку или терминал на вашем компьютере.
Введите команду заменив your_email@example.com (на вашу электронную почту компания).
```
ssh-keygen -t rsa -b 4096 -C "your_email@example.com", 
```
Выберите место для сохранения ключей и введите пароль(не обязательно).

2.Добавление открытого ключа в GitLab:

Войдите в свой аккаунт на GitLab. Нажмите на свою фотографию в правом верхнем углу и выберите "Settings".
В боковом меню выберите "SSH Keys".
Скопируйте содержимое публичного ключа (обычно расположенного в файле ~/.ssh/id_rsa.pub).
Вставьте скопированный ключ в поле "Key" и дайте ему описательное имя.
Нажмите "Add key", чтобы сохранить ключ в GitLab.

3.Конфигурация SSH-агента:

Убедитесь, что на вашем компьютере установлен и запущен SSH-агент.
Если нет, то установите его
```
sudo apt-get update
sudo apt-get install openssh-client
```
4.Откройте командную строку или терминал и введите команду ssh-agent.Copy
Добавьте свой приватный ключ в агент с помощью команды `ssh-add ~/.ssh/id_rsa`, заменив ~/.ssh/id_rsa на путь к вашему приватному ключу.
Настройка репозиториев для работы по SSH:

5.Откройте проект в GitLab, к которому вы хотите подключиться по SSH.
Найдите URL удаленного репозитория и скопируйте его.
Откройте командную строку или терминал и перейдите в папку, где вы хотите склонировать репозиторий.
Введите команду git clone <URL репозитория>, заменив <URL репозитория> на скопированный URL.
Теперь ваш репозиторий склонирован на ваш компьютер и готов к работе.

6.Тестирование SSH-подключения:

Откройте командную строку или терминал.
Введите команду ssh -T git@gitlab.com.
Если вы видите сообщение "Welcome to GitLab, @your_username!", значит, ваше SSH-подключение работает корректно.
Работа с GitLab через SSH:

7.В командной строке или терминале перейдите в папку с вашим репозиторием.
Выполняйте обычные команды Git, такие как git pull, git push и git commit, и Git будет использовать SSH для аутентификации.
Обработка проблем и отладка:

8.Если у вас возникли проблемы с SSH-подключением, проверьте следующие вещи:
Убедитесь, что вы использовали правильный URL репозитория при клонировании или настройке удаленного репозитория.
Проверьте, что ваш публичный и приватный ключи были добавлены в GitLab и SSH-агент соответственно.
Убедитесь, что SSH-агент запущен и ваш приватный ключ добавлен в него.
Проверьте настройки файрвола и сетевого соединения.


9.Для автоматизации запуска SSH-агента и добавление ключей к нему, добавьте это в конец своего .bash_profile(`nano ~/.bashrc`):

```
if [ -z "$SSH_AUTH_SOCK" ] ; then
    eval $(ssh-agent -s)
fi
ssh-add
```
Выполните следующую команду, чтобы применить изменения к текущей сессии:
```
source ~/.bashrc
```
10.или более совершенный скрипт для автоматизации запуска SSH-агента. Добавьте это в конец своего .bash_profile(`nano ~/.bashrc`)::
```
SSH_ENV="$HOME/.ssh/agent-environment"

function start_agent {
    echo "Initialising new SSH agent..."
    /usr/bin/ssh-agent | sed 's/^echo/#echo/' > "${SSH_ENV}"
    echo succeeded
    chmod 600 "${SSH_ENV}"
    . "${SSH_ENV}" > /dev/null
    /usr/bin/ssh-add;
}

# Source SSH settings, if applicable

if [ -f "${SSH_ENV}" ]; then
    . "${SSH_ENV}" > /dev/null
    #ps ${SSH_AGENT_PID} doesn't work under cywgin
    ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
        start_agent;
    }
else
    start_agent;
fi
```
Выполните следующую команду, чтобы применить изменения к текущей сессии:
```
source ~/.bashrc
```
Как работает скрипт:
Создается переменная SSH_ENV, которая указывает путь к файлу, в котором будут храниться переменные среды, связанные с SSH агентом. Обычно это файл ~/.ssh/agent-environment.

Определена функция start_agent, которая запускает новый SSH-агент. Внутри этой функции происходит следующее:

Выводится сообщение "Initialising new SSH agent..." для информирования пользователя.
Запускается команда /usr/bin/ssh-agent, которая создает новый SSH-агент. Результат этой команды передается в sed, чтобы заменить команды echo на #echo. Это делается, чтобы переменные среды не выводились на экран, но оставались доступными в файле ${SSH_ENV}.
Создается файл ${SSH_ENV}, в который записываются переменные среды, созданные SSH-агентом.
Файл ${SSH_ENV} получает права доступа 600 (только для чтения владельцем).
В файл ${SSH_ENV} "загружаются" переменные среды с помощью . (точка) в текущем процессе, чтобы сделать их доступными в текущей оболочке.
Запускается команда /usr/bin/ssh-add, которая добавляет ключи к агенту.
После определения функции start_agent, скрипт проверяет, существует ли уже файл ${SSH_ENV}. Если файл существует, то переменные среды из него загружаются в текущую оболочку, и затем проверяется, активен ли SSH-агент. Если SSH-агент не активен (не запущен), то вызывается функция start_agent для его инициализации.

Если файл ${SSH_ENV} не существует, скрипт также вызывает функцию start_agent, чтобы создать и запустить новый SSH-агент.

Таким образом, этот скрипт автоматизирует запуск SSH-агента и добавление ключей к нему, что облегчает аутентификацию при подключении к удаленным серверам через SSH.